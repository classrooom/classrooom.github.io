<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>‎</title>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<style>
  @import url(https://fonts.googleapis.com/css?family=Open+Sans);

body {
 background: #111;
 font-family: "Open Sans",  Impact;
}

.area {
  text-align: center;
  font-size: 6.5em;
  color: #fff;
  letter-spacing: -7px;
  font-weight: 700;
  text-transform: uppercase;
  animation: blur 2s ease-out infinite;
  text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;
}

@keyframes blur {
  from {
    text-shadow:0px 0px 10px #fff,
      0px 0px 10px #fff, 
      0px 0px 25px #fff,
      0px 0px 25px #fff,
      0px 0px 25px #fff,
      0px 0px 25px #fff,
      0px 0px 25px #fff,
      0px 0px 25px #fff,
      0px 0px 50px #fff,
      0px 0px 50px #fff,
      0px 0px 50px #7B96B8,
      0px 0px 150px #7B96B8,
      0px 10px 100px #7B96B8,
      0px 10px 100px #7B96B8,
      0px 10px 100px #7B96B8,
      0px 10px 100px #7B96B8,
      0px -10px 100px #7B96B8,
      0px -10px 100px #7B96B8;
  }
}
</style>
</head>
<body style="background-color: #b0b0b076">
  <button id="btn" class='area' style="height: 100%; width: 100%; position: absolute; background-color: #b0b0b076; border: none; z-index: 10; font-family: 'Montserrat', sans-serif;font-size: 90px; letter-spacing: 3px; display: none;" onclick="btnfullscreen()">C‎l‎i‎c‎k</button>
</body>
    <script>



  
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
          apiKey: "AIzaSyCZWu8JZNceRADb6ue70NMdGna0IESCk54",
          authDomain: "newpagecontrol.firebaseapp.com",
          projectId: "newpagecontrol",
          databaseURL: "https://newpagecontrol-default-rtdb.firebaseio.com",
          storageBucket: "newpagecontrol.appspot.com",
          messagingSenderId: "385357397707",
          appId: "1:385357397707:web:8981ca5578e10cc601654e",
          measurementId: "G-KK4YD8HDSH"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
      
        const auth =  firebase.auth();

        
      
        function btnfullscreen(){
          if(document.body.innerHTML.includes(localStorage.getItem('item'))){
            document.getElementById('btn').style.display='none'
            document.body.requestFullscreen()
          }
        }

        //signIN function
        function  signIn(){
          var email = document.getElementById("email");
          var password  = document.getElementById("psw");
          const promise = auth.signInWithEmailAndPassword(email.value+"@aldsfiousbd.com",password.value);
          promise.catch(e=>alert(e.message));
        }
      
      
        //signOut
      
        function signOut(){
          auth.signOut();
          //usr signed out
          document.getElementById('myifr').src = document.getElementById('myifr').src;
        }
      
      
       var database = firebase.database();
      
       function createDBChild(referance, nextval){
      
        database.ref('system/' + '').set({
            [referance]:nextval
        })
        console.log("coin val saved");
      
      
      }
      
      function updateDBChild(referance, nextval){
      
      database.ref('system/' + '').update({
          [referance]:nextval
      })
      console.log("coin val saved");
      
      
      }
      
      
      var newValue = '';
      
      function getsynccoins() {
      
      var user_ref = database.ref('system/' + '')
        return user_ref.once("value", function(snapshot) {
        var data = snapshot.val();
        console.log(data);
        
        
        newValue = data;
        //alert(newValue.title)
      })
      }
      function changecoins() {
      
      var user_ref = database.ref('system/' + '')
        user_ref.once("value", function(snapshot) {
        var data = snapshot.val();
        console.log(data);
        
        
        document.title = data.title;
        console.log("reload: "+data.reload)
        console.log("title: "+data.title)
        if(data.reload == "true" & window.top.location.href.includes('two')){
            
          console.log(data.reload)
          document.getElementById('myifr').src = document.getElementById('myifr').src;
          updateDBChild('reload', 'false');
          user_ref.once("value", function(snapshot) {
          var data = snapshot.val();
          //alert(newValue.title)
          })
        }
        //alert(newValue.title)
      })
      }

      
      var oldValue = '';
      var si=false
        
        //active user to homepage
        function sleep(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
      }
        firebase.auth().onAuthStateChanged((user)=>{
          if(user){
              si=true;
            var usremail = user.email;
            getsynccoins()
            oldValue = newValue;
            
            //alert('in')
            //alert("Active user "+usremail);
            //user is signed in, use email variable to get the user's email
          }else{
            //user not logged in
          }
        })
      
        
        
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        
      
          var other = '';
          var features = '';
          var clr = '';
          var fr = '';
      other = null; //will be our window reference
      features =
      'menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes';
      //,height=400,width=400
      

      //alert(newValue)
      setInterval(() => {

                  //other.document.title = prompt('clr');
                   changecoins();
                   try{
                    var user_ref = database.ref('system/' + '')
                    user_ref.once("value", function(snapshot) {
                    var data = snapshot.val();
                    if(!window.top.location.href.includes('two')){
                    document.getElementById('d').innerHTML = 'Reload : '+data.reload;
                }
                    //alert(newValue.title)
            })
        
            }catch{
                console.log('The error is probably b/c this is the embed page and not the main page, dont worry about it.')
            }
      }, 1000);



      


      </script>

</html>